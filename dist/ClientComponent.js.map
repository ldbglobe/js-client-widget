{"version":3,"file":"ClientComponent.js","mappings":"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","sources":["webpack://js-client-widget/webpack/bootstrap","webpack://js-client-widget/webpack/runtime/make namespace object","webpack://js-client-widget/./src/components/EventDispatcher.js","webpack://js-client-widget/./src/components/Messenger.js","webpack://js-client-widget/./src/components/ClientComponent.js","webpack://js-client-widget/./src/ClientComponent.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default class EventDispatcher {\r\n\tconstructor(eventSource) {\r\n\t\tthis.eventSource = eventSource;\r\n\t\tthis.events = new Set();\r\n\t}\r\n\r\n\t// registration methods\r\n\tregisterEvent(eventName, callback) {\r\n\t\tif(typeof callback === \"function\")\r\n\t\t{\r\n\t\t\tif(!this.events[eventName])\r\n\t\t\t\tthis.events[eventName] = new Set();\r\n\r\n\t\t\tthis.events[eventName].add(callback)\r\n\t\t}\r\n\t}\r\n\tunregisterEvent(eventName, callback) {\r\n\t\tif(this.events[eventName])\r\n\t\t\tthis.events[eventName].delete(callback)\r\n\t}\r\n\r\n\t// trigger event\r\n\tfireEvent(eventName, data) {\r\n\t\tif(this.events[eventName])\r\n\t\t{\r\n\t\t\tthis.events[eventName].forEach(function(callback, index) {\r\n\t\t\t\tcallback(data,{\r\n\t\t\t\t\teventSource:this.eventSource,\r\n\t\t\t\t\teventName:eventName,\r\n\t\t\t\t\tdata:data\r\n\t\t\t\t});\r\n\t\t\t}.bind(this))\r\n\t\t}\r\n\t}\r\n}","import EventDispatcher from \"./EventDispatcher.js\";\r\n\r\nexport default class Messenger {\r\n\tconstructor(param) {\r\n\t\tparam = param || {};\r\n\r\n\t\tthis.setRecipient(param.recipient);\r\n\r\n\t\tthis.id = param.id || (()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,a=>(a^Math.random()*16>>a/4).toString(16)))();\r\n\t\tthis.events = new EventDispatcher(this);\r\n\t\twindow.addEventListener('message', this.__handleMessage.bind(this))\r\n\t}\r\n\r\n\tclearRecipient() {\r\n\t\tthis.recipients = new Set();\r\n\t}\r\n\tsetRecipient(browserWindow) {\r\n\t\tif(browserWindow && browserWindow.length > 0)\r\n\t\t{\r\n\t\t\tthis.recipients = new Set(browserWindow);\r\n\t\t}\r\n\t\telse if(browserWindow)\r\n\t\t{\r\n\t\t\tthis.recipients = new Set([browserWindow]);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis.clearRecipient();\r\n\t\t}\r\n\t}\r\n\taddRecipient(browserWindow) {\r\n\t\tif(browserWindow)\r\n\t\t{\r\n\t\t\tthis.recipients.add(browserWindow);\r\n\t\t}\r\n\t}\r\n\tdeleteRecipient(browserWindow) {\r\n\t\tif(browserWindow)\r\n\t\t{\r\n\t\t\tthis.recipients.delete(browserWindow);\r\n\t\t}\r\n\t}\r\n\r\n\tgetId() {\r\n\t\treturn this.id;\r\n\t}\r\n\r\n\ton(eventName,callback) { this.events.registerEvent(eventName,callback) }\r\n\toff(eventName,callback) { this.events.unregisterEvent(eventName,callback) }\r\n\r\n\t__handleMessage(e) {\r\n\t\tlet data = typeof e.data === \"string\" ? JSON.parse(e.data) : (e.data || {});\r\n\t\tif(data.format === 'messenger' && data.id === this.id)\r\n\t\t\tthis.events.fireEvent('message',data.message);\r\n\t}\r\n\r\n\tsend(message) {\r\n\t\tif(this.recipients.size > 0)\r\n\t\t{\r\n\t\t\tthis.recipients.forEach(function(message, recipient) {\r\n\t\t\t\tif(typeof recipient.postMessage === \"function\")\r\n\t\t\t\t{\r\n\t\t\t\t\trecipient.postMessage(JSON.stringify({\r\n\t\t\t\t\t\tformat:'messenger',\r\n\t\t\t\t\t\tversion:1,\r\n\t\t\t\t\t\tid:this.id,\r\n\t\t\t\t\t\tmessage:message,\r\n\t\t\t\t\t}),\"*\");\r\n\t\t\t\t}\r\n\t\t\t}.bind(this,message));\r\n\t\t}\r\n\t}\r\n}","import EventDispatcher from \"./EventDispatcher.js\";\r\nimport Messenger from \"./Messenger.js\";\r\n\r\nexport default class ClientComponent {\r\n\tstatic ___ = {\r\n\t\topened:new Set(),\r\n\t\tinstances:new Set(),\r\n\t};\r\n\tconstructor(param) {\r\n\t\tparam = param || {};\r\n\t\tparam.widget = param.widget || {};\r\n\r\n\t\tthis.___ = {\r\n\t\t\tid: (()=>([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,a=>(a^Math.random()*16>>a/4).toString(16)))(),\r\n\t\t\twidget: {\r\n\t\t\t\tlimit:      param.widget.limit      || param.widgetLimit      || 1,\r\n\t\t\t\turl:        param.widget.url        || param.widgetUrl        || null,\r\n\t\t\t\tresizable:  param.widget.resizable  || param.widgetResizable  || true,\r\n\t\t\t\tscrollbars: param.widget.scrollbars || param.widgetScrollbars || true,\r\n\t\t\t\tdependent:  param.widget.dependent  || param.widgetDependent  || true,\r\n\t\t\t\twidth:      param.widget.width      || param.widgetWidth      || 600,\r\n\t\t\t\theight:     param.widget.height     || param.widgetHeight     || 400,\r\n\t\t\t\ttop:        param.widget.top        || param.widgetTop        || null,\r\n\t\t\t\tleft:       param.widget.left       || param.widgetLeft       || null,\r\n\t\t\t\twindow:     null,\r\n\t\t\t},\r\n\t\t\tcloseDetectionInterval: null,\r\n\t\t};\r\n\r\n\t\t// position set at screen center if top or left no set\r\n\t\tthis.___.widget.top = this.___.widget.top || (screen.height - this.___.widget.height) / 2;\r\n\t\tthis.___.widget.left = this.___.widget.left || (screen.width - this.___.widget.width) / 2;\r\n\r\n\t\tthis.___.events = new EventDispatcher(this);\r\n\t\tthis.___.messenger = new Messenger({id:this.___.id});\r\n\t\tthis.___.messenger.on('message',this.___handleMessage.bind(this));\r\n\r\n\t\tif(!this.___.widget.url)\r\n\t\t{\r\n\t\t\tthrow `widge.url parameter is mandatory`\r\n\t\t}\r\n\t\telse if(this.___.widget.url.match(/#/))\r\n\t\t{\r\n\t\t\tthrow `widget.url parameter can not contain any hash (${this.___.widget.url})`\r\n\t\t}\r\n\r\n\t\tClientComponent.___.instances.add(this);\r\n\t}\r\n\r\n\t// call a method or apply a calback on all client instances registered\r\n\tstatic invokeAll(methodOrCallback,args) {\r\n\t\tif(typeof methodOrCallback === \"function\")\r\n\t\t{\r\n\t\t\tClientComponent.___.instances.forEach(function(client) { methodOrCallback(client) });\r\n\t\t}\r\n\t\telse if(typeof methodOrCallback === \"string\")\r\n\t\t{\r\n\t\t\tClientComponent.___.instances.forEach(function(client) {\r\n\t\t\t\treturn typeof client?.[methodOrCallback] === \"function\" ? client?.[methodOrCallback](...args) : null;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t___getId() { return this.___.id; }\r\n\tgetId() { return this.___getId(); }\r\n\r\n\t/* --------------------------------------------------\r\n\t * Native available events\r\n\t * --------------------------------------------------\r\n\t * widget.open\r\n\t * widget.ready\r\n\t * widget.close\r\n\t*/\r\n\t___on(eventName,callback) { this.___.events.registerEvent(eventName,callback) }\r\n\ton(eventName,callback) { this.___on(eventName,callback); }\r\n\r\n\t___off(eventName,callback) { this.___.events.unregisterEvent(eventName,callback) }\r\n\toff(eventName,callback) { this.___off(eventName,callback); }\r\n\r\n\t// all the events are handled by the messenger services\r\n\t___fire(eventName,data,dest=null) {\r\n\t\t// send event to the widget\r\n\t\tif(dest === null || dest === \"broadcast\")\r\n\t\t\tthis.___.messenger.send({eventName, data});\r\n\t\t// fire the event locally\r\n\t\tif(dest === null || dest === \"local\")\r\n\t\t\tthis.___.events.fireEvent(eventName, data);\r\n\t}\r\n\tfire(eventName,data,dest=null) { this.___fire(eventName,data,dest); }\r\n\r\n\t___open(param) {\r\n\t\t// close current instance (if previously opened)\r\n\t\tthis.close();\r\n\t\t// close any extra instances  previously opened\r\n\t\tthis.___openedLimitRelease();\r\n\t\t// open new window and register the client as opened\r\n\t\tvar windowSettings = [];\r\n\t\twindowSettings.push(`resizable=${this.___.widget.resizable ? 'yes':'no'}`);\r\n\t\twindowSettings.push(`scrollbars=${this.___.widget.scrollbars ? 'yes':'no'}`);\r\n\t\twindowSettings.push(`dependent=${this.___.widget.dependent ? 'yes':'no'}`);\r\n\t\tif(this.___.widget.width)      windowSettings.push(`width=${this.___.widget.width}`);\r\n\t\tif(this.___.widget.height)     windowSettings.push(`height=${this.___.widget.height}`);\r\n\t\tif(this.___.widget.top)        windowSettings.push(`top=${this.___.widget.top}`);\r\n\t\tif(this.___.widget.left)       windowSettings.push(`left=${this.___.widget.left}`);\r\n\r\n\t\tvar widgetUrl = param && param.widgetUrl\r\n\t\t\t// if custom widgetUrl set in parameters we simply use it\r\n\t\t\t? param.widgetUrl\r\n\t\t\t// else if widget url is a function we call it with the received param to build the real url string\r\n\t\t\t: (typeof this.___.widget.url === 'function' ? this.___.widget.url(param) : this.___.widget.url);\r\n\r\n\t\tthis.___.widget.window = window.open(`${widgetUrl}`, this.___.id, windowSettings.join(','));\r\n\r\n\t\tClientComponent.___.opened.add(this);\r\n\t\t// then set messenger link, send event and start the \"close\" watcher\r\n\t\tthis.___.messenger.setRecipient(this.___.widget.window);\r\n\t\tthis.___fire('widget.open',null,\"local\");\r\n\t\tthis.___startDetectionLoop();\r\n\t}\r\n\topen(param) { this.___open(param); }\r\n\r\n\t___close() {\r\n\t\tthis.___stopDetectionLoop();\r\n\t\tthis.___.messenger.clearRecipient();\r\n\t\tClientComponent.___.opened.delete(this);\r\n\t\tif(this.___.widget.window && !this.___.widget.window.closed)\r\n\t\t{\r\n\t\t\tthis.___.widget.window.close();\r\n\t\t\tthis.___.widget.window = null;\r\n\t\t\tthis.___fire('widget.close',null,\"local\");\r\n\t\t}\r\n\t}\r\n\tclose() { this.___close(); }\r\n\r\n\t// **********************************************************\r\n\t// private methods\r\n\t// **********************************************************\r\n\r\n\t// close older client->widget to set a new free slot\r\n\t___openedLimitRelease() {\r\n\t\tvar deleteCount = ClientComponent.___.opened.size - this.___.widget.limit + 1;\r\n\t\tvar list = Array.from(ClientComponent.___.opened).reverse();\r\n\t\tfor (let c of list) {\r\n\t\t\tif(deleteCount>0)\r\n\t\t\t{\r\n\t\t\t\tdeleteCount--;\r\n\t\t\t\tc.close();\r\n\t\t\t\tClientComponent.___.opened.delete(c)\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// generic message handling and event dispatch\r\n\t___handleMessage(message) {\r\n\t\tif(message.eventName)\r\n\t\t{\r\n\t\t\t// received event => only local dispatch\r\n\t\t\tthis.___fire(message.eventName, message.data, \"local\");\r\n\t\t}\r\n\t}\r\n\t// passive detection of widget popup close event\r\n\t// we do not need messenging for this\r\n\t___stopDetectionLoop() {\r\n\t\tclearInterval(this.___.closeDetectionInterval);\r\n\t\tthis.___.closeDetectionInterval = null;\r\n\t}\r\n\t___startDetectionLoop() {\r\n\t\tif(this.___.widget.window.closed)\r\n\t\t{\r\n\t\t\tthis.___close();\r\n\t\t}\r\n\t\telse if(!this.___.closeDetectionInterval)\r\n\t\t{\r\n\t\t\tthis.___.closeDetectionInterval = setInterval(this.___startDetectionLoop.bind(this),10);\r\n\t\t}\r\n\t}\r\n}","import ClientComponent from \"./components/ClientComponent.js\"\r\nwindow.ClientComponent = ClientComponent;"],"names":["__webpack_require__","exports","Symbol","toStringTag","Object","defineProperty","value","EventDispatcher","eventSource","this","events","Set","eventName","callback","add","data","forEach","index","bind","Messenger","param","setRecipient","recipient","id","replace","a","Math","random","toString","window","addEventListener","__handleMessage","recipients","browserWindow","length","clearRecipient","registerEvent","unregisterEvent","e","JSON","parse","format","fireEvent","message","size","postMessage","stringify","version","ClientComponent","widget","___","limit","widgetLimit","url","widgetUrl","resizable","widgetResizable","scrollbars","widgetScrollbars","dependent","widgetDependent","width","widgetWidth","height","widgetHeight","top","widgetTop","left","widgetLeft","closeDetectionInterval","screen","messenger","on","___handleMessage","match","instances","___getId","___on","___off","dest","send","___fire","close","___openedLimitRelease","windowSettings","push","open","join","opened","___startDetectionLoop","___open","___stopDetectionLoop","closed","___close","deleteCount","Array","from","reverse","c","clearInterval","setInterval","methodOrCallback","args","client"],"sourceRoot":""}